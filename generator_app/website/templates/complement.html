<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Wyb√≥r Dope≈Çnienia</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; margin-top: 20px; padding-bottom: 50px; }
        .home-icon { position: absolute; left: 15px; top: 15px; font-size: 30px; text-decoration: none; }

        .section-container {
            margin: 20px auto;
            max-width: 800px;
            padding: 10px;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in;
        }

        .section-container.visible {
            display: block;
            opacity: 1;
        }

        .btn {
            background-color: #f8f9fa;
            border: 2px solid #333;
            color: #333;
            padding: 15px 30px;
            font-size: 16px;
            margin: 10px;
            cursor: pointer;
            border-radius: 8px;
            min-width: 200px;
            transition: all 0.3s;
        }

        .btn:hover { background-color: #e2e6ea; transform: translateY(-2px); }

        .btn.selected {
            background-color: #333;
            color: #fff;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        h2 { border-bottom: 1px solid #ccc; padding-bottom: 10px; margin-bottom: 20px; color: #555; }
    </style>
    <script>
        function handleStep1(type, btn) {
            document.getElementById('noun_phrase_input').value = type === 'noun_phrase' ? 'true' : 'false';

            resetButtons('step-1-btns');
            btn.classList.add('selected');

            hideAllNextSteps();

            if (type === 'pronoun') {
                document.getElementById('step-2-pronoun').classList.add('visible');
            } else {
                document.getElementById('step-2-noun').classList.add('visible');
            }
        }

        function handleStep2(number, btn, context) {
            document.getElementById('number_input').value = number;

            resetButtons(context);
            btn.classList.add('selected');

            document.getElementById('step-3-pronoun-sg').classList.remove('visible');
            document.getElementById('step-3-pronoun-pl').classList.remove('visible');
            document.getElementById('step-3-noun-sg').classList.remove('visible');
            document.getElementById('step-3-noun-pl').classList.remove('visible');

            const isNounPhrase = document.getElementById('noun_phrase_input').value === 'true';

            let targetId = '';
            if (!isNounPhrase && number === 'singular') targetId = 'step-3-pronoun-sg';
            if (!isNounPhrase && number === 'plural') targetId = 'step-3-pronoun-pl';
            if (isNounPhrase && number === 'singular') targetId = 'step-3-noun-sg';
            if (isNounPhrase && number === 'plural') targetId = 'step-3-noun-pl';

            if (targetId) {
                document.getElementById(targetId).classList.add('visible');
                document.getElementById(targetId).scrollIntoView({behavior: "smooth", block: "start"});
            }
        }

        function resetButtons(containerId) {
            const container = document.getElementById(containerId);
            const buttons = container.getElementsByClassName('btn');
            for (let b of buttons) {
                b.classList.remove('selected');
            }
        }

        function hideAllNextSteps() {
            const sections = document.querySelectorAll('.sub-step');
            sections.forEach(s => s.classList.remove('visible'));
        }
    </script>
</head>
<body>
    <a href="{{ url_for('views.restart') }}" class="home-icon" title="Restart">üè†</a>

    <h1>Wyb√≥r Dope≈Çnienia</h1>

    <form action="{{ url_for('views.complement', arguments=request.view_args['arguments']) }}" method="POST">
        <input type="hidden" id="noun_phrase_input" name="noun_phrase" value="">
        <input type="hidden" id="number_input" name="number" value="">

        <div class="section-container visible">
            <h2>1. Wybierz formƒô dope≈Çnienia</h2>
            <div id="step-1-btns">
                <button type="button" class="btn" onclick="handleStep1('pronoun', this)">Zaimek</button>
                <button type="button" class="btn" onclick="handleStep1('noun_phrase', this)">Fraza Rzeczownikowa</button>
            </div>
        </div>

        <div id="step-2-pronoun" class="section-container sub-step">
            <h2>2. Wybierz liczbƒô (Zaimek)</h2>
            <div id="btns-pronoun-number">
                <button type="button" class="btn" onclick="handleStep2('singular', this, 'btns-pronoun-number')">Liczba Pojedyncza</button>
                <button type="button" class="btn" onclick="handleStep2('plural', this, 'btns-pronoun-number')">Liczba Mnoga</button>
            </div>
        </div>

        <div id="step-2-noun" class="section-container sub-step">
            <h2>2. Wybierz liczbƒô (Fraza)</h2>
            <div id="btns-noun-number">
                <button type="button" class="btn" onclick="handleStep2('singular', this, 'btns-noun-number')">Liczba Pojedyncza</button>
                <button type="button" class="btn" onclick="handleStep2('plural', this, 'btns-noun-number')">Liczba Mnoga</button>
            </div>
        </div>

        <div id="step-3-pronoun-sg" class="section-container sub-step">
            <h2>3. Zatwierd≈∫ rodzaj zaimka</h2>
            <button type="submit" class="btn" name="pronoun_or_article" value="personal">Osobowy (me, him...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="demonstrative">WskazujƒÖcy (this...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="possessive">Dzier≈ºawczy (mine...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="indefinite">Nieokre≈õlony (someone...)</button>
        </div>

        <div id="step-3-pronoun-pl" class="section-container sub-step">
            <h2>3. Zatwierd≈∫ rodzaj zaimka</h2>
            <button type="submit" class="btn" name="pronoun_or_article" value="personal">Osobowy (us, them...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="demonstrative">WskazujƒÖcy (these...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="possessive">Dzier≈ºawczy (ours...)</button>
        </div>

        <div id="step-3-noun-sg" class="section-container sub-step">
            <h2>3. Zatwierd≈∫ okre≈õlenie</h2>
            <button type="submit" class="btn" name="pronoun_or_article" value="possessive_det">Z okr. dzier≈ºawczym (my...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="demonstrative_det">Z okr. wskazujƒÖcym (this...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="article">Z rodzajnikiem (the...)</button>
        </div>

        <div id="step-3-noun-pl" class="section-container sub-step">
            <h2>3. Zatwierd≈∫ okre≈õlenie</h2>
            <button type="submit" class="btn" name="pronoun_or_article" value="possessive_det">Z okr. dzier≈ºawczym (my...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="demonstrative_det">Z okr. wskazujƒÖcym (these...)</button>
            <button type="submit" class="btn" name="pronoun_or_article" value="article">Z rodzajnikiem (the...)</button>
        </div>

    </form>
</body>
</html>